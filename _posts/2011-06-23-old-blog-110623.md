---
layout: post
title: "android - 비트맵 bitmap gray 변환 흑백 변환"
date: 2011-06-23 12:00:00
comments: false
categories: old blog
---

// ColorMatrixColorFilter 사용 
{% highlight ruby %}
mbitmap = BitmapFactory.decodeFile(path);
int width, height;
height = mbitmap.getHeight(); 
width = mbitmap.getWidth(); 
Bitmap grayscaleBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(grayscaleBitmap);
Paint p = new Paint();
ColorMatrix cm = new ColorMatrix();
cm.setSaturation(0);
ColorMatrixColorFilter filter = new ColorMatrixColorFilter(cm);
p.setColorFilter(filter);
c.drawBitmap(mbitmap,0,0,p);
mbitmap = Bitmap.createBitmap(grayscaleBitmap); 
{% endhighlight %}

// pixel 로 부터(이건 직접 구현해보지않아서 확실치 않음) 
{% highlight ruby %}
int[] pixels = width*height;
mbitmap.getPixels(pixels, 0, width, 0, 0, height, width); 
for (int y = 0; y<height; y++) {
    int outputOffset = y * width;
    for (int x = 0; x<width; x++) {
        int index = outputOffset + x;
        int R = ((pixels[index]>>16)&0xff);
        int G = ((pixels[index]>>8)&0xff);
        int B = ((pixels[index])&0xff);
        int grey = (R + G + B) / 3;
        pixels[index] = 0xff000000 | (grey<<16) | (grey<<8) | grey;
    }
}
mbitmap = Bitmap.createBitmap (pixels, width, height, config)
{% endhighlight %}