---
layout: post
title: "android - ContentValues 객체로 MediaStore에 미디어 삽입하기"
date: 2011-06-17 12:00:00
comments: false
categories: old blog
---

어플리케이션에서 만든 미디어 파일들은 바로 다른 어플에서 사용 할 수 없다  
따라서 미디어 스토어에 삽입하는 과정을 해줘야함

{% highlight ruby %}
String fullpath = mkdir ;
File mpath = new File(fullpath);
if(! mpath.isDirectory()) {
    mpath.mkdirs();
}
File path = new File("/sdcard/edit.jpg");
String stringpath = path.toString() ;
Bitmap mbitmap = BitmapFactory.decodeFile(fileName);
try{
    FileOutputStream editedImage = new FileOutputStream(path);
    mbitmap.compress(Bitmap.CompressFormat.JPEG, 100, editedImage);
    editedImage.flush();
    editedImage.close();
    Toast.makeText(ModImage.this, "저장되었습니다..", Toast.LENGTH_LONG).show();
} catch (Exception e) {
    Toast.makeText(this, "저장에 실패하였습니다...", Toast.LENGTH_LONG).show();
}
ContentValues values = new ContentValues(3);
values.put(Media.MIME_TYPE, "image/jpeg");

//파일 절대 경로 지정
values.put(MediaStore.Images.Media.DATA, stringpath);
ContentResolver resolver = getContentResolver();
Uri uri = resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,uri)); 
{% endhighlight %}